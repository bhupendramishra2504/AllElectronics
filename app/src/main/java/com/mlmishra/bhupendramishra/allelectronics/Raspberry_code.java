package com.mlmishra.bhupendramishra.allelectronics;

import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.text.InputType;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.inputmethod.InputMethodManager;
import android.widget.EditText;
import android.widget.PopupMenu;
import android.widget.Button;
import android.widget.TextView;
import android.text.method.ScrollingMovementMethod;
import android.widget.Toast;
import android.graphics.Color;
import android.widget.ImageView;
import android.app.Activity;

public class Raspberry_code extends Activity {
    private Button menu_button;
    private TextView text_desc;
    private Button save_button;
    private ImageView imageview;
    private String filename,write_data,first_string;
    String separator = System.getProperty("line.separator");

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //getSupportActionBar().hide();
        setContentView(R.layout.activity_raspberry_code);
        menu_button=(Button)findViewById(R.id.rpbutton1);
        save_button=(Button)findViewById(R.id.rpbutton2);
        text_desc=(TextView)findViewById(R.id.rptv1);
        imageview=(ImageView)findViewById(R.id.lpimageview1);

        first_string="Code Generated by"+separator+"AllElectronics Android APP"+separator+separator+"Read Disclaimers regarding usage guidelines"+separator+separator+separator;
        text_desc.setText("Code Generated by"+separator+"AllElectronics Android APP"+separator+separator+"Read Disclaimers regarding usage guidelines"+separator+separator+separator);
        menu_button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                //Creating the instance of PopupMenu
                PopupMenu popup = new PopupMenu(Raspberry_code.this, menu_button);
                //Inflating the Popup using xml file
                popup.getMenuInflater().inflate(R.menu.menu_raspberry_code, popup.getMenu());

                //registering popup with OnMenuItemClickListener
                popup.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
                    public boolean onMenuItemClick(MenuItem item) {
                        //Toast.makeText(Ladder_program.this,"You Clicked : " + item.getTitle(),Toast.LENGTH_SHORT).show();

                        menu_button.setText(item.getTitle());
                        switch (item.getItemId()) {
                            case R.id.getstarted:
                                imageview.setImageResource(0);
                                // imageview.setImageResource(R.drawable.noexample);
                                text_desc.setText(first_string+separator + "HOW TO INSTALL NOOBS IN SD CARD" +separator+ separator + "FORMAT YOUR SD CARD. To do this:" +separator+ separator + "1. Visit the SD Association’s website and download SD Formatter 4.0 for either Windows or Mac." +separator+ separator + "2 .install the software." +separator+ separator + "3. Insert the SD card into the laptop’s SD card reader and select the SD Card Drive in the Software" +separator+ separator + "4. Select the FORMAT option to format SD Card" + separator + separator + "DRAG AND DROP NOOBS FILES" +separator+ separator + "1. After your SD card has been formatted, drag all the files from the extracted NOOBS folder and drop them onto the SD card drive." +separator+ separator + "2. Safely remove the SD card and insert it into your Raspberry Pi." + separator + separator + "FIRST BOOT" +separator+ separator + "1. Plug in keyboard, mouse and monitor  cables." +separator+ separator + "2. plug in the USB power cable to your Pi." +separator+ separator + "3. Your Raspberry Pi will boot, and a window will appear with a list of OS. you can use Raspbian – tick the box next to Raspbian and click on Install." +separator+ separator + "4. Raspbian will then run through its installation process. Note this can take a while When the install process has completed." + separator + separator + "LOGGING IN AND ACCESSING THE GRAPHICAL USER INTERFACE" +separator+ separator + "1. The default login for Raspbian is username pi with the password raspberry." + separator + "2. To load the graphical user interface type startx.");


                                return true;
                            case R.id.paloutput:
                                imageview.setImageResource(0);
                                //imageview.setImageResource(R.drawable.ncexample);
                                text_desc.setText(first_string+separator+"Force Raspberry Pi output to composite video"+separator+separator+"1. Power on the TV/Monitor and switch the TV/Monitor to AV." +separator+separator+ "2.Power on the Raspberry Pi and hold down the SHIFT key until the Green LED stops flickering on the Raspberry Pi." +separator+separator+ "3. Then try pressing 1, 2, 3, 4 keys on the keyboard one by one. “1” to select output to the HDMI which is by default. “2” to select output to “Safe HDMI”. “3” is for composite PAL. “4” is for composite NTSC."+separator+separator+"4. If you already installed OS before, then move down to the OS you have installed using your keyboard and hit e key to open editor."+separator+separator+"5. The editor will open the config.txt file, look for this line #sdtv_mode=0. Change it to one of the following as per your type of TV/Monitor."+separator+separator+"sdtv_mode=0"+separator+"Normal NTSC sdtv_mode=1"+separator+"Japanese version of NTSC – no pedestal sdtv_mode=2"+separator+"Normal PAL sdtv_mode=3"+separator+"Brazilian version of PAL – 525/60 rather than 625/50, different subcarrier"+separator+separator+"6. Finally you need to add hdmi_ignore_hotplug=1. Make sure that hdmi_force_hotplug=1 is commented out. You will have to switch back this setting if you ever plug-in your Raspberry Pi with HDMI. Better to write both and just comment out one of them with # symbol."+separator+separator+ "7. Press TAB key and select Okay button. Then press ESC key and let the Raspberry Pi reboot. Wait for a while and it should display output to AV this time. That’s all.");
                                return true;
                            case R.id.vncserver:
                                imageview.setImageResource(0);
                                // imageview.setImageResource(R.drawable.andexample);
                                text_desc.setText(first_string+separator+"REMOTELY ACCESSING YOUR RASPBERRY PI"+separator+separator+"install the TightVNC package:"+separator+separator+"command : $ sudo apt-get install tightvncserver"+separator+separator+"run TightVNC Server which will prompt you to enter a password and an optional view-only password:"+separator+separator+"Command: $ tightvncserver"+separator+separator+"Start a VNC server from the terminal."+separator+separator+"Command: $ vncserver"+separator+separator+"on your computer, install and run the VNC client:"+separator+separator+"AUTOMATION AND RUN AT BOOT"+separator+separator+"Change Directory to home/pi"+separator+separator+"$ cd /home/pi"+separator+separator+"Change Directory to .config directory"+separator+separator+"command : $ cd .config"+separator+separator+"Create new directory autostart"+separator+separator+"Command : $ mkdir autostart"+separator+separator+"Create a new configuration file"+separator+separator+"Command : $ sudo nano tightvnc.desktop"+separator+separator+"Edit the content of the file with following text"+separator+separator+"[Desktop Entry]"+separator + "Type=Application" +separator+ "Name=TightVNC"+separator + "Exec=vncserver :1" + separator+"StartupNotify=false"+separator+separator+"save the file by pressing CNTRL+O then exit the file and reboot");
                                return true;
                            case R.id.networksetting:
                                imageview.setImageResource(0);
                                // imageview.setImageResource(R.drawable.andexample2);
                                text_desc.setText(first_string+separator+"SETTING STATIC IP ADDRESS TO RASPBERRY PI"+separator+separator+"Connect your Raspberry PI to the Internet Network via the Broadband/Mobile network"+separator+separator+"Edit the file interface by typing the following command"+separator+separator+"Command : $ sudo nano /etc/network/interfaces"+separator+separator+"look for the line inside this file"+separator+separator+"iface eth0 inet static"+separator+separator+"add the follwoing line below this line"+separator+separator+"address 192.168.1.23"+separator+"netmask 255.255.255.0"+separator+"gateway 192.168.1.1"+separator+separator+"save the file by pressing CNTRL+O exit and reboot");
                                return true;
                            case R.id.homesecurity:
                                imageview.setImageResource(0);
                                imageview.setImageResource(R.drawable.ss1);
                                text_desc.setText(first_string + separator +"---INSTALLING MOTION SERVER---"+ "Run Command Prompt in your Raspberry PI" + separator + separator + "1. Install the webcam server software using the following command" + separator + separator + ">> Command : $ sudo apt-get install motion" + separator + separator + "2. Edit the config file so that the service can be started and can be accessed on local network, use the below command to achieve this " + separator + separator + ">> Command : $ sudo nano /etc/motion/motion.conf" + separator + separator + "3.Change the following lines in the motion.conf files" + separator+separator+" a. daemon off (change it to daemon on)"+separator+"b. Webcam_localhost on (change it to Webcam_localhost off)"+separator+separator+"4. Setting the service up : "+separator+separator+">>Command : $ sudo nano /ect/default/motion"+separator+separator+"i. start_motion_daemon=no (Change it to yes)"+separator+separator+"5. Ensure your webcam is plugged into the usb port on your Raspberry Pi and start the service:"+separator+separator+">>Command : $ sudo service motion start"+separator+separator+"6. If you want to stop the service then use the command:"+separator+separator+">> Command : $ sudo service motion stop"+separator+separator+"7. With the service started you can now open a webpage on your normal computer and by going to the IP of the Raspberry pi on port 8081 (in the address bar) you should be able to view your webcam (please note that the one in the picture shows port 8089 as I have set this up in the conf file. The default port is 8081): ip_address:8081"+separator+separator+"Save images to the directory by changing it into the motion.conf file"+separator+separator+">target_dir /home/pi/motionpic"+separator+separator+"---INSTALLING Whatsapp on Raspberry PI---"+separator+separator+"Yowsup is a python library that allows you to login and use the WhatsApp service and provides you with all capabilities of an official WhatsApp client,allowing you to create a full-fledged custom WhatsApp client."+separator+separator+"Write the following commands : "+separator+separator+">>Command : $ sudo apt-get update"+separator+separator+">> Command : $ sudo apt-get upgrade"+separator+separator+">> Command : $ sudo rpi-update"+separator+separator+">> Command : $ sudo apt-get install python-dateutil"+separator+separator+">> Command : $ sudo apt-get install python-setuptools"+separator+separator+">> Command : $ sudo apt-get install python-dev"+separator+separator+">> Command : $ sudo apt-get install libevent-dev"+separator+separator+">> Command : $ sudo apt-get install ncurses-dev"+separator+separator+">> Command : $ git clone git://github.com/tgalal/yowsup.git"+separator+separator+">> Command : $ cd yowsup"+separator+separator+">> Command : $ sudo python setup.py install"+separator+separator+"2. Request a code to activate the whatsapp"+separator+separator+">>Command : $ python yowsup-cli registration --requestcode sms --phone <phone_no_with_country_code> --cc <country_code> --mcc <mcc_code_for_operator> --mnc <mnc_code_for_operator>"+separator+separator+"mcc is Mobile Country Code check your here, (https://en.wikipedia.org/wiki/Mobile_country_code), mnc is Mobile Network Code check your here (https://en.wikipedia.org/wiki/Mobile_country_code), You should receive on your phone a sms message with a code like xxx-xxx"+separator+separator+"Send a message to request registration with this command, replace xxx-xxx with code you received"+separator+separator+">>Command : $ python yowsup-cli registration --register <whatsapp code in this format xxx-xxx> --phone <mobile_no_with_country_code> --cc <country_code>"+separator+separator+"If all goes well, we should get a message like this"+separator+separator+"status: ok"+separator+"kind: free"+separator+"pw: xxxxxxxxxxxxxxxxxx="+separator+"price: Rs 50"+separator+"price_expiration: 1416553637"+separator+"currency: INR"+separator+"cost: 0.89"+separator+"expiration: 1445241022"+separator+"expiration: 1445241022"+separator+"login: <phone_no_with_country_code"+separator+"type: existing"+separator+separator+"Create a file to save your credentials"+separator+separator+">> Command : $ sudo nano /home/pi/yowsup/config"+separator+separator+"write this content to the file"+separator+separator+"cc=<your_country_code>"+separator+"phone=<your_phone_no._with _country_code>"+separator+"password=<password given while activation>"+separator+separator+">> Command : $ cd /home/pi/yowsup"+separator+separator+">> Command : $ yowsup-cli demos --yowsup --config config"+separator+separator+">> Command : /L"+separator+separator+">> Command : /message send <number_to_which_msg_to_be_send_with_CC> <message to be send in double quotes"+separator+separator+"To send a image through whatsapp use this command"+separator+separator+">> Command : /image send <number_to_which_msg_to_be_send_with_CC> <path of the image>"+separator+separator+"A Small python script can be added to automatically send the motion server picture to the specified numbers through whatsapp. This script will be covered in details in future versions"+separator+separator+"Snapshots from the system"+separator+separator);
                                return true;
                            case R.id.webserver:
                                imageview.setImageResource(0);
                                //imageview.setImageResource(R.drawable.ss1);
                                text_desc.setText(first_string + separator +"---INSTALL APACHE---"+ "First install the apache2 package by typing the following command in to the Terminal:" + separator + separator + ">> Command : $ sudo apt-get install apache2 -y" + separator + separator + "TEST THE WEB SERVER" + separator + separator + "2. By default, Apache puts a test HTML file in the web folder. This default web page is served when you browse to http://localhost/ on the Pi itself, or http://192.168.1.10 (whatever the Pi's IP address is) from another computer on the network. if it show <This Works> This means you have Apache working! " + separator + separator + "CHANGING THE DEFAULT WEB PAGE" + separator + separator + "This default web page is just a HTML file on the filesystem. It is located at /var/www/index.html. navigate to this directory in the Terminal and have a look at what's inside:"+separator+ "cd /var/www" +separator+ "ls -al" +separator+ "This will show you:total 12" + separator+"drwxr-xr-x  2 root root 4096 Jan  8 01:29 ."+separator + "drwxr-xr-x 12 root root 4096 Jan  8 01:28 .." +separator+ "-rw-r--r--  1 root root  177 Jan  8 01:29 index.html" + separator+separator+"This shows that there is one file in /var/www/ called index.html. The . refers to the directory itself /var/www/ and the .. refers to the parent directory /var/."+separator+"As you can see, by default the www directory and index.html file are both owned by the root user. In order to edit the file, you must gain root permissions. Either change the owner to your own user (sudo chown pi: index.html) before editing, or edit with sudo, e.g. sudo nano index.html"+separator+separator+"ADDITIONAL - INSTALL PHP"+separator+separator+"To allow your Apache server to process PHP files, you'll need to install PHP5 and the PHP5 module for Apache. Type the following command to install these:"+separator+separator+">>Command : $ sudo apt-get install php5 libapache2-mod-php5 -y"+separator+separator+"Now remove the index.html file:"+separator+separator+">>Command : $ sudo rm index.html"+separator+separator+""+separator+separator+">> Command : $ sudo nano index.php"+separator+separator+"and put some PHP content in it:"+separator+separator+"Command : $ <?php echo \"hello world\";"+separator+separator+"Now save and refresh your browser. You should see \"hello world\".");
                                return true;
                            case R.id.wordpress:
                                imageview.setImageResource(0);
                                //imageview.setImageResource(R.drawable.ss1);
                                text_desc.setText(first_string + separator +"---INSTALL APACHE---"+ "First install the apache2 package by typing the following command in to the Terminal:" + separator + separator + ">> Command : $ sudo apt-get install apache2 -y" + separator + separator + "TEST THE WEB SERVER" + separator + separator + "2. By default, Apache puts a test HTML file in the web folder. This default web page is served when you browse to http://localhost/ on the Pi itself, or http://192.168.1.10 (whatever the Pi's IP address is) from another computer on the network. if it show <This Works> This means you have Apache working! " + separator + separator + "CHANGING THE DEFAULT WEB PAGE" + separator + separator + "This default web page is just a HTML file on the filesystem. It is located at /var/www/index.html. navigate to this directory in the Terminal and have a look at what's inside:"+separator+ "cd /var/www" +separator+ "ls -al" +separator+ "This will show you:total 12" + separator+"drwxr-xr-x  2 root root 4096 Jan  8 01:29 ."+separator + "drwxr-xr-x 12 root root 4096 Jan  8 01:28 .." +separator+ "-rw-r--r--  1 root root  177 Jan  8 01:29 index.html" + separator+separator+"This shows that there is one file in /var/www/ called index.html. The . refers to the directory itself /var/www/ and the .. refers to the parent directory /var/."+separator+"As you can see, by default the www directory and index.html file are both owned by the root user. In order to edit the file, you must gain root permissions. Either change the owner to your own user (sudo chown pi: index.html) before editing, or edit with sudo, e.g. sudo nano index.html"+separator+separator+"ADDITIONAL - INSTALL PHP"+separator+separator+"To allow your Apache server to process PHP files, you'll need to install PHP5 and the PHP5 module for Apache. Type the following command to install these:"+separator+separator+">>Command : $ sudo apt-get install php5 libapache2-mod-php5 -y"+separator+separator+"Now remove the index.html file:"+separator+separator+">>Command : $ sudo rm index.html"+separator+separator+""+separator+separator+">> Command : $ sudo nano index.php"+separator+separator+"and put some PHP content in it:"+separator+separator+"Command : $ <?php echo \"hello world\";"+separator+separator+"Now save and refresh your browser. You should see \"hello world\"."+separator+separator+"Install the MySQL Server and PHP-MySQL packages by entering the following command into the terminal:"+separator+separator+"Command : $ sudo apt-get install mysql-server php5-mysql -y"+separator+separator+"You can download WordPress from wordpress.org using the wget command. Helpfully, a copy of the latest version of WordPress is always available at wordpress.org/latest.tar.gz and wordpress.org/latest.zip, so you can grab the latest version without having to look it up on the website. At the time of writing, this is version 4.0."+ separator+"Navigate to /var/www/, and download WordPress to this location. You'll need to empty the folder first (be sure to check you're not deleting files you need before running rm); change the ownership of this folder to the pi user too."+separator+separator+"cd /var/www" +separator+separator+"sudo chown pi: ." +separator+separator+ "sudo rm *" +separator+separator+ "wget http://wordpress.org/latest.tar.gz"+separator+separator+"Now extract the tarball, move the contents of the folder it extracted (wordpress) to the current directory and remove the (now empty) folder and the tarball to tidy up:"+separator+separator+"tar xzf latest.tar.gz" +separator+separator+ "mv wordpress/* ." +separator+separator+ "rm -rf wordpress latest.tar.gz"+separator+separator+"To get your WordPress site set up, you need a database. Run the mysql command in the terminal and provide your login credentials (e.g. username root, password password):"+separator+separator+"mysql -uroot -ppassword"+separator+separator+"Here I have provided my password (the word password) on the command line; there is no space between -p and your password."+separator+separator+"Once you're connected to MySQL, you can create the database your WordPress installation will use" +separator+separator+ "mysql> create database wordpress;" +separator+separator+ "Note the semi-colon ending the statement. On success you should see the following message:" +separator+separator + "Query OK, 1 row affected (0.00 sec)" +separator+separator+ "Exit out of the MySQL prompt with Ctrl + D."+separator+separator+"You need to find out your Pi's IP address to access it in the browser, so in a terminal type the command hostname -I." +separator+separator + "Navigate to http://YOUR-IP-ADDRESS e.g. http://192.168.1.5 in the web browser on your Pi." +separator+separator+ "You should see a WordPress error page; this is good! Click the big button marked Create a Configuration File followed by the Let's go! button on the next page."+separator+separator+"Now fill out the basic site information as follows:" +separator+separator+"Database Name:      wordpress" +separator+separator+ "User Name:          root" +separator+separator+"Password:           <YOUR PASSWORD>" +separator+separator+"Database Host:      localhost" +separator+separator+ "Table Prefix:       wp_" +separator+separator+"Upon successful database connection, you will be given the contents of your wp-config.php file:"+separator+separator+"Copy this text, return to the terminal on the Pi and edit the file with nano wp-config.php. Paste the text into this file, and save and exit with Ctrl + X, then Y for yes and Enter."+separator+separator+"Now hit the Run the install button."+"Fill out the information: give your site a title, create a username and password, put in your email address and untick the search engines box. Hit the Install WordPress button, then log in using the account you just created."+separator+separator+"Now you're logged in and have your site set up, you can see the website by visiting your IP address in the browser on the Pi or another computer on the network. To log in again (or on another computer), go to http://YOUR-IP-ADDRESS/wp-admin.");
                                return true;


                            case R.id.orexample2:
                                // imageview.setImageResource(R.drawable.orexample2);
                                text_desc.setText("The above realizes the function: 'O' = 'A' OR 'B' OR 'C'.This circuit shows three NO switches 'A' , 'B' and 'C'. When the normally open contacts of any switche closes, electricity is able to flow to the Output 'O'.");
                                return true;
                            case R.id.coil:
                                //  imageview.setImageResource(R.drawable.coil);
                                text_desc.setText("This is an output instruction in PLC Ladder Programming. To make Coil/Output 'Logically High' power must be flow through this coil. In ladder programming a 'Logic' is made from set of 'NO' 'NC' contacts to make a desired interlock for this coil ");
                                return true;
                            case R.id.resetcoil:
                                // imageview.setImageResource(R.drawable.resetcoil);
                                text_desc.setText("This is an output instruction in PLC Ladder Programming. This Instruction will withdraw power from the coil i.e. no power could flow from the coil. 'please note : This instruction must be used with 'SET COIL' instruction  ");
                                return true;
                            case R.id.setcoil:
                                //imageview.setImageResource(R.drawable.setcoil);
                                text_desc.setText("This is an output instruction in PLC Ladder Programming. This Instruction will enable power to retain in the coil i.e. Once it get activated through the user logic power will continue to flow in the coil even the logic become false. It is more explained in the next Chapters . 'please note : This instruction must be used with 'RESET COIL' instruction  ");
                                return true;

                            case R.id.logic:
                                //imageview.setImageResource(R.drawable.andexample);
                                text_desc.setText("To interpret this diagram imagine that the power is on the vertical line on the left hand side, we call this the hot rail. On the right hand side is the neutral rail. In the figure If the inputs are opened or closed in the right combination the power can flow from the hot rail, through the inputs, to power the outputs, and finally to the neutral rail.");
                                return true;


                        }
                        return true;
                    }
                });

                popup.show();//showing popup menu
            }
        });//closing the setOnClickListener method

        save_button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                AlertDialog.Builder builder = new AlertDialog.Builder(Raspberry_code.this);
                builder.setTitle("Enter Filename");

                final EditText input = new EditText(Raspberry_code.this);

                input.setInputType(InputType.TYPE_CLASS_TEXT);
                builder.setView(input);


                builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        filename = input.getText().toString();
                        write_data =text_desc.getText().toString();
                                Global.write_file1(filename, write_data, Raspberry_code.this);
                        InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                        mgr.hideSoftInputFromWindow(input.getWindowToken(), 0);
                        Toast.makeText(Raspberry_code.this, "Raspberry Code file generated and saved in your library, same can be found in storge media also", Toast.LENGTH_LONG).show();

                    }
                });
                builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.cancel();
                        InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                        mgr.hideSoftInputFromWindow(input.getWindowToken(), 0);
                    }
                });

                builder.show();
            }

        });
    }

    @Override
    public void onBackPressed() {

        Intent intent = new Intent(Raspberry_code.this, Table_content.class);
        startActivity(intent);
        finish();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.menu_raspberry_code, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle action bar item clicks here. The action bar will
        // automatically handle clicks on the Home/Up button, so long
        // as you specify a parent activity in AndroidManifest.xml.
        int id = item.getItemId();

        //noinspection SimplifiableIfStatement
        if (id == R.id.action_settings) {
            return true;
        }

        return super.onOptionsItemSelected(item);
    }
}
